Passive Reconaissance:
    TODO:
        - Download the below tools on PC.
    
    * Essential passive reconnaisance tools include:
        whois       to query WHOIS servers
        nslookup    to query DNS servers
        dig         to query DNS servers

    * Also, will look at online tools:
        DNSDumpster
        Shodan.io

    * What is recon?        Preliminary survey to gather information about a target.
    * It is the first step in the unified Killchain, where we look for a foothold.
        - https://www.unifiedkillchain.com/

    * Passive recon:    Publicly available information, without directly engaging with the target. Includes: DNS records, job ads, news articles, etc.
    * Active recon:     Direct engagement with the target. For example: connecting to server (HTTP, FTP, SMTP).

    WHOIS:
        * WHOIS is a request protocol that follows RFC 3912 https://www.ietf.org/rfc/rfc3912.txt.
        * A WHOIS server listens on TCP port 43. 
        * Domain registrar is reponsible for updating these records.
        * WHOIS tells us:
            - Registrar:                    via which reg was the domain registered?
            - Registrant contact info:      Name, organization, address, phone, among other things. Can be hidden by security service.
            - Creation, update and expiration dates.
            - Name server:                  Which server to ask to resolve.
        command:        whois tryhackme.com
        Notice redirection. This is who is maintaining the WHOIS record for this domain name.
        E.g Registrar WHOIS Server: whois.namecheap.com

        * Note: Lots of automated tools abuse WHOIS, harvesting emails. Hence many WHOIS services protect against it.
        * A WHOIS service may redact email addresses, or be subscribed to a privacy service to achieve the same.


    NSLOOKUP & DIG:
        * Stands for Name Server lookup, allows us to find IP address of domain.
        Command:        nslookup [OPTIONS] [DOMAIN] [SERVER]
            Where OPTIONS:      Query type. See table below. 
            where SERVER:       DNS server we wish to query. Cloudflare offers 1.1.1.1 and 1.0.0.1, Google offers 8.8.8.8 and 8.8.4.4, and Quad9 offers 9.9.9.9 and 149.112.112.112
            Example: nslookup -type=A tryhackme.com 1.1.1.1


        QUERIES:
            A 	        IPv4 Addresses
            AAAA 	    IPv6 Addresses
            CNAME 	    Canonical Name
            MX 	        Mail Servers
            SOA 	    Start of Authority
            TXT 	    TXT Records

    DIG:
        * For more advanced DNS queries & additional functionality. Domain Information Groper.
        Command:         dig DOMAIN_NAME TYPE
        * Use same table above for TYPE.
        * Querying a 1.1.1.1 DNS server:        dig @1.1.1.1 tryhackme.com MX


    DNSDUMPSTER:
        * DIG & NSLOOKUP cannot find subdomains alone.
        * Hoping that a subdomain is irregularly updated and hence has vulns.
        
        How to find subdomains:
            - Search engineS. More than one... looking for unadvertised subdomains. 
            - Brute force (ffuf, etc.)
            - Best option: Use an online service like DNSDUMPSTER   https://dnsdumpster.com/
            - DNSDUMPSTER provides subdomains as well as listening servers in easy to read tables.
            https://dnsdumpster.com/

    SHODAN.IO:
        * Tries to connect to every device available online. Search engine of things, not pages.
        * Once it gets a response, collects all info related to the service and stores in searchable DB.
        * Helps us learn about: IP address, hosting company, geo location, server type and version.


    SUMMARY: 
        * We have shown how WHOIS, NSLOOKUP, DIG, DNSDUMPSTER and SHODAN.IO can be used to perform passive recon.
        * Power lies in passive nature, trove of info can be found using these without them knowing.

        Some useful commands:
            Lookup WHOIS record 	                whois tryhackme.com
            Lookup DNS A records 	                nslookup -type=A tryhackme.com
            Lookup DNS MX records at DNS server 	nslookup -type=MX tryhackme.com 1.1.1.1
            Lookup DNS TXT records 	                nslookup -type=TXT tryhackme.com
            Lookup DNS A records 	                dig tryhackme.com A
            Lookup DNS MX records at DNS server 	dig @1.1.1.1 tryhackme.com MX
            Lookup DNS TXT records 	                dig tryhackme.com TXT    